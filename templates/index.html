<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SKY TTS - Professional Text-to-Speech conversion with multiple voices and languages. Convert any text to natural sounding speech instantly.">
    <meta name="keywords" content="text to speech, TTS, voice generator, speech synthesis, SKY TTS">
    <title>SKY TTS - Professional Text to Speech Converter</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <style>
        :root {
            --primary-color: #4361ee;
            --secondary-color: #3a0ca3;
            --accent-color: #f72585;
            --light-color: #f8f9fa;
            --dark-color: #212529;
            --success-color: #4cc9f0;
            --warning-color: #f8961e;
            --danger-color: #ef233c;
            --bg-color: #f5f7fa;
            --text-color: #212529;
            --card-bg: white;
        }

        .dark-mode {
            --bg-color: #121212;
            --text-color: #f8f9fa;
            --card-bg: #1e1e1e;
            --dark-color: #f8f9fa;
        }
        
        /* Profile Modal Styles */
        .profile-tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
        }

        .tab-btn {
            padding: 10px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 600;
            color: #666;
            border-bottom: 3px solid transparent;
        }

        .tab-btn.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .profile-info {
            margin-bottom: 30px;
        }

        .info-item {
            display: flex;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .info-item label {
            width: 150px;
            font-weight: 600;
            color: var(--text-color);
        }

        .plan-badge {
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .plan-badge.free {
            background-color: #e3f2fd;
            color: #1976d2;
        }

        .plan-badge.pro {
            background-color: #e8f5e9;
            color: #388e3c;
        }

        .plan-badge.enterprise {
            background-color: #f3e5f5;
            color: #8e24aa;
        }

        .plan-card {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #eee;
        }

        .upgrade-btn {
            margin-top: 15px;
            background-color: var(--accent-color);
        }

        .danger-zone {
            margin-top: 30px;
            padding: 20px;
            background: #fff3f3;
            border-radius: 10px;
            border: 1px solid #ffcdd2;
        }

        .danger-btn {
            background-color: var(--danger-color);
        }

        /* User Menu Styles */
        .user-menu {
            position: absolute;
            right: 0;
            top: 100%;
            background: var(--card-bg);
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            min-width: 200px;
            z-index: 1000;
            display: none;
            border: 1px solid rgba(0,0,0,0.1);
        }

        .user-menu.show {
            display: block;
        }

        .user-menu-item {
            padding: 12px 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-menu-item:hover {
            background-color: rgba(67, 97, 238, 0.1);
        }

        .user-menu-item i {
            width: 20px;
            text-align: center;
        }

        .user-menu-divider {
            height: 1px;
            background: #eee;
            margin: 5px 0;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 20px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-radius: 0 0 10px 10px;
            margin-bottom: 30px;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo i {
            font-size: 2.5rem;
            color: white;
        }
        
        .logo h1 {
            font-size: 2rem;
            font-weight: 700;
        }
        
        .logo span {
            color: var(--accent-color);
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 20px;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            padding: 5px 10px;
            border-radius: 5px;
        }
        
        nav a:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        main {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 30px;
        }
        
        .content-card {
            background-color: var(--card-bg);
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            padding: 25px;
            margin-bottom: 30px;
        }
        
        .content-card h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }
        
        .form-group {
            margin-bottom: 20px;
            position: relative;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-color);
        }
        
        textarea {
            width: 100%;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            min-height: 150px;
            resize: vertical;
            font-size: 1rem;
            transition: border 0.3s ease;
            background-color: var(--card-bg);
            color: var(--text-color);
        }
        
        textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }
        
        select, input[type="range"] {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            background-color: var(--card-bg);
            color: var(--text-color);
            cursor: pointer;
        }
        
        .flex-group {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .flex-group > div {
            flex: 1;
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .checkbox-group input {
            width: auto;
        }
        
        .btn {
            display: inline-block;
            padding: 12px 24px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .btn:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .btn-block {
            display: block;
            width: 100%;
        }
        
        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
        }
        
        .btn-outline:hover {
            background-color: var(--primary-color);
            color: white;
        }
        
        .audio-player {
            width: 100%;
            margin-top: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        .status {
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            display: none;
        }
        
        .status.success {
            background-color: rgba(76, 201, 240, 0.1);
            border-left: 4px solid var(--success-color);
            color: var(--text-color);
            display: block;
        }
        
        .status.error {
            background-color: rgba(239, 35, 60, 0.1);
            border-left: 4px solid var(--danger-color);
            color: var(--text-color);
            display: block;
        }
        
        .voice-info {
            background-color: rgba(67, 97, 238, 0.05);
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            border-left: 4px solid var(--primary-color);
        }
        
        .voice-info h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .voice-info p {
            margin-bottom: 10px;
        }
        
        .voice-info strong {
            color: var(--text-color);
        }
        
        aside {
            position: sticky;
            top: 20px;
            height: fit-content;
        }
        
        .features-card {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .features-card h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .features-list {
            list-style: none;
        }
        
        .features-list li {
            padding: 10px 0;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .features-list li:last-child {
            border-bottom: none;
        }
        
        .features-list i {
            color: var(--primary-color);
        }
        
        footer {
            background-color: var(--dark-color);
            color: white;
            padding: 30px 0;
            margin-top: 50px;
            border-radius: 10px 10px 0 0;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
        }
        
        .footer-column h3 {
            color: white;
            margin-bottom: 20px;
            font-size: 1.2rem;
        }
        
        .footer-column ul {
            list-style: none;
        }
        
        .footer-column ul li {
            margin-bottom: 10px;
        }
        
        .footer-column a {
            color: #adb5bd;
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .footer-column a:hover {
            color: white;
        }
        
        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .social-links a {
            color: white;
            background-color: rgba(255, 255, 255, 0.1);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .social-links a:hover {
            background-color: var(--primary-color);
            transform: translateY(-3px);
        }
        
        .copyright {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #adb5bd;
        }

        /* Voice Controls Compact */
        .voice-controls {
            background-color: rgba(67, 97, 238, 0.05);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .voice-controls-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .range-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .range-value {
            min-width: 40px;
            text-align: center;
            font-weight: 600;
            color: var(--primary-color);
        }

        .file-upload {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .file-upload-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 15px;
            background-color: rgba(67, 97, 238, 0.1);
            border-radius: 8px;
            cursor: pointer;
            width: fit-content;
        }

        .file-upload-btn:hover {
            background-color: rgba(67, 97, 238, 0.2);
        }

        #fileName {
            font-size: 0.9rem;
            color: #6c757d;
        }

        .dark-mode-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            z-index: 100;
        }

        /* Character Counter */
        .char-counter {
            position: absolute;
            right: 10px;
            bottom: 10px;
            font-size: 0.8rem;
            color: #6c757d;
            background-color: rgba(255,255,255,0.7);
            padding: 2px 5px;
            border-radius: 3px;
        }

        .char-counter.limit-exceeded {
            color: var(--danger-color);
            font-weight: bold;
        }

        /* Voice Gallery */
.voice-gallery {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: 15px;
    margin-top: 20px;
}

.voice-card {
    padding: 15px;
    border-radius: 8px;
    background-color: rgba(67, 97, 238, 0.1);
    text-align: center;
    cursor: pointer;
    transition: all 0.3s;
    border: 1px solid rgba(67, 97, 238, 0.2);
}

.voice-card:hover {
    background-color: rgba(67, 97, 238, 0.2);
}

.voice-card h4 {
    margin: 8px 0;
    font-size: 1rem;
}

.voice-gender, .voice-style {
    font-size: 0.8rem;
    color: #6c757d;
    margin-top: 5px;
}

.no-voices {
    text-align: center;
    padding: 20px;
    color: #666;
    grid-column: 1 / -1;
}

.voice-card.active .voice-gender,
.voice-card.active .voice-style {
    color: rgba(255,255,255,0.8);
}

        .preview-btn {
            background: none;
            border: none;
            color: var(--primary-color);
            font-size: 1.2rem;
            cursor: pointer;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 5px;
            transition: all 0.3s;
        }

        .voice-card.active .preview-btn {
            color: white;
            background-color: rgba(255,255,255,0.2);
        }
		
		.no-voices {
    text-align: center;
    padding: 20px;
    color: #666;
}

.status i {
    margin-right: 8px;
}

.voice-card {
    transition: all 0.2s ease;
    cursor: pointer;
}

.voice-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

.voice-card.active {
    background-color: var(--primary-color);
    color: white;
    border-color: var(--primary-color);
}

.voice-card.active .voice-gender,
.voice-card.active .voice-style {
    color: rgba(255,255,255,0.8);
}

#generateBtn:disabled {
    opacity: 0.7;
    cursor: not-allowed;
}

        /* Select2 Customization */
        .select2-container--default .select2-selection--single {
            height: 46px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: var(--card-bg);
        }

        .select2-container--default .select2-selection--single .select2-selection__rendered {
            line-height: 46px;
            color: var(--text-color);
        }

        .select2-container--default .select2-selection--single .select2-selection__arrow {
            height: 44px;
        }

        .select2-dropdown {
            background-color: var(--card-bg);
            border: 1px solid #ddd;
            border-radius: 8px;
        }

        .select2-results__option {
            padding: 10px 15px;
            color: var(--text-color);
        }

        .select2-container--default .select2-results__option--highlighted[aria-selected] {
            background-color: rgba(67, 97, 238, 0.2);
            color: var(--primary-color);
        }
		
		/* Basic dropdown styles */
select {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid #ddd;
    border-radius: 8px;
    font-size: 1rem;
    background-color: var(--card-bg);
    color: var(--text-color);
    margin-bottom: 20px;
}

        /* Voice Filter */
        .voice-filter {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
}

.voice-filter-btn {
    padding: 5px 10px;
    border-radius: 20px;
    border: 1px solid #ddd;
    background-color: var(--card-bg);
    color: var(--text-color);
    cursor: pointer;
    font-size: 0.8rem;
    transition: all 0.3s;
}

        /* Login Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: var(--card-bg);
            margin: 5% auto;
            padding: 30px;
            border-radius: 10px;
            width: 80%;
            max-width: 500px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            animation: fadeIn 0.3s;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: var(--danger-color);
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .auth-form input {
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            width: 100%;
            background-color: var(--card-bg);
            color: var(--text-color);
        }

        .auth-form button {
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            background-color: var(--primary-color);
            color: white;
        }

        .auth-form button:hover {
            background-color: var(--secondary-color);
        }

        .auth-providers {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }

        .auth-provider-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 12px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            border: 1px solid #ddd;
            background-color: var(--card-bg);
            color: var(--text-color);
        }

        .google-btn {
            background-color: #4285F4;
            color: white;
        }

        .github-btn {
            background-color: #333;
            color: white;
        }

        .divider {
            display: flex;
            align-items: center;
            margin: 20px 0;
            color: #6c757d;
        }

        .divider::before, .divider::after {
            content: "";
            flex: 1;
            border-bottom: 1px solid #ddd;
        }

        .divider-text {
            padding: 0 10px;
        }

        /* Payment Styles */
        .payment-methods {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .payment-method {
            width: 60px;
            height: 40px;
            border-radius: 5px;
            background-color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 5px;
            border: 1px solid #ddd;
        }

        .payment-method img {
            max-width: 100%;
            max-height: 100%;
        }

        /* User Menu */
        .user-menu {
            background-color: var(--card-bg);
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            padding: 10px 0;
            min-width: 200px;
            border: 1px solid rgba(0,0,0,0.1);
        }
        
        .user-menu-item {
            padding: 10px 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .user-menu-item:hover {
            background-color: rgba(67, 97, 238, 0.1);
        }
        
        .user-menu-item i {
            width: 20px;
            text-align: center;
        }

        /* Responsive Styles */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
                gap: 20px;
            }
            
            nav ul {
                justify-content: center;
                flex-wrap: wrap;
            }
            
            main {
                grid-template-columns: 1fr;
            }
            
            .footer-content {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .flex-group {
                flex-direction: column;
            }

            .voice-controls-grid {
                grid-template-columns: 1fr;
            }

            .voice-gallery {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }

            .modal-content {
                width: 95%;
                margin: 10% auto;
            }
        }

        /* Animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animated {
            animation: fadeIn 0.5s ease-out forwards;
        }
        
        .delay-1 { animation-delay: 0.1s; }
        .delay-2 { animation-delay: 0.2s; }
        .delay-3 { animation-delay: 0.3s; }
    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <div class="logo">
                <i class="fas fa-microphone-alt"></i>
                <h1>SKY <span>TTS</span></h1>
            </div>
            <nav>
    <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#" onclick="openModal('pricingModal')">Pricing</a></li>
        <li><a href="https://www.skyinfinitetech.com/" target="_blank">About Me</a></li>
        <li><a href="#contact">Contact</a></li>
        <li>
            <div class="auth-container">
                <a href="#" id="authButton" class="btn btn-outline">
                    <i class="fas fa-sign-in-alt"></i> Login
                </a>
                <div id="userMenu" class="user-menu"></div>
            </div>
        </li>
    </ul>
</nav>
        </div>
    </header>

    <div class="container">
        <main>
            <div class="main-content">
                <div class="content-card animated">
                    <h2>Text to Speech Converter</h2>
                    
                    <div class="form-group file-upload">
                        <label for="text">Enter your text or upload file:</label>
                        <textarea id="text" placeholder="Type or paste your text here to convert it to speech..." maxlength="5000"></textarea>
                        <div class="char-counter"><span id="charCount">0</span>/5000</div>
                        <div>
                            <input type="file" id="fileUpload" accept=".txt,.docx" style="display: none;">
                            <label for="fileUpload" class="file-upload-btn">
                                <i class="fas fa-file-upload"></i> Choose File
                            </label>
                            <span id="fileName">No file selected</span>
                        </div>
                    </div>
                    
                    <div class="flex-group">
                        <div class="form-group">
                            <label for="language">Language:</label>
                            <select id="language" class="language-select" onchange="updateVoices()">
                                <option value="">Select Language</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="voice">Voice:</label>
                            <select id="voice" class="voice-select">
                                <option value="">Select Voice</option>
                            </select>
                        </div>
                    </div>

                    <div class="voice-controls">
                        <h3>Voice Customization</h3>
                        <div class="voice-controls-grid">
                            <div class="form-group">
                                <label for="speed">Speed: <span id="speedValue" class="range-value">1.0x</span></label>
                                <div class="range-container">
                                    <input type="range" id="speed" min="0.5" max="2" step="0.1" value="1" oninput="document.getElementById('speedValue').textContent=this.value+'x'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="pitch">Pitch: <span id="pitchValue" class="range-value">1.0x</span></label>
                                <div class="range-container">
                                    <input type="range" id="pitch" min="0.5" max="1.5" step="0.1" value="1" oninput="document.getElementById('pitchValue').textContent=this.value+'x'">
                                </div>
                            </div>
                            <div class="checkbox-group">
                                <input type="checkbox" id="use_bark">
                                <label for="use_bark">Premium Voice</label>
                            </div>
                            <div class="checkbox-group">
                                <input type="checkbox" id="use_ssml">
                                <label for="use_ssml">Use SSML (Advanced Markup)</label>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn btn-block" onclick="generateTTS()" id="generateBtn">
                        <i class="fas fa-play"></i> Generate Speech
                    </button>
                    
					<div style="text-align: center; margin: 15px 0;">
    <p style="font-size: 0.9rem; color: #666;">
        <i class="fas fa-unlock-alt"></i> No login required! 
        <a href="#" onclick="openModal('signupModal')" style="color: var(--primary-color); text-decoration: underline;">
            Sign up
        </a> for higher limits and premium voices.
    </p>
</div>
					
                    <div id="status" class="status"></div>
                    
                    <audio id="audioPlayer" class="audio-player" controls style="display: none;"></audio>
                    
                    <div id="voiceInfo" class="voice-info" style="display: none;">
                        <h3>Voice Details</h3>
                        <p id="voiceDescription"></p>
                        <p><strong>Style:</strong> <span id="voiceStyle"></span></p>
                        <p><strong>Best for:</strong> <span id="voiceUseCases"></span></p>
                        <p><strong>Age Range:</strong> <span id="voiceAge"></span></p>
                        <p><strong>Mood:</strong> <span id="voiceMood"></span></p>
                    </div>
                </div>
                
                <div class="content-card animated delay-1">
                    <h2>How to use SKY TTS</h2>
                    <ol style="padding-left: 20px; margin-top: 15px;">
                        <li style="margin-bottom: 10px;">Enter your text in the input box or upload a text file</li>
                        <li style="margin-bottom: 10px;">Select your preferred language</li>
                        <li style="margin-bottom: 10px;">Choose a voice from the available options</li>
                        <li style="margin-bottom: 10px;">Customize speed and pitch if needed</li>
                        <li style="margin-bottom: 10px;">Click "Generate Speech" to convert</li>
                        <li style="margin-bottom: 10px;">Listen to the result and download if needed</li>
                    </ol>
                </div>
            </div>
            
            <aside>
                <div class="features-card animated delay-2">
                    <h3>Popular Voices</h3>
                    <div class="voice-filter">
                        <button class="voice-filter-btn active" onclick="filterVoices('all', event)">All</button>
                        <button class="voice-filter-btn" onclick="filterVoices('male', event)">Male</button>
                        <button class="voice-filter-btn" onclick="filterVoices('female', event)">Female</button>
                    </div>
                    <div class="voice-gallery" id="voiceGallery">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
                
                <div class="features-card animated delay-3">
                    <h3>Why Choose SKY TTS?</h3>
                    <ul class="features-list">
                        <li>
                            <i class="fas fa-check-circle"></i>
                            <span>Multiple language support</span>
                        </li>
                        <li>
                            <i class="fas fa-check-circle"></i>
                            <span>Natural sounding voices</span>
                        </li>
                        <li>
                            <i class="fas fa-check-circle"></i>
                            <span>Online & offline options</span>
                        </li>
                        <li>
                            <i class="fas fa-check-circle"></i>
                            <span>Voice customization</span>
                        </li>
                        <li>
                            <i class="fas fa-check-circle"></i>
                            <span>File upload support</span>
                        </li>
                    </ul>
                </div>
				<div class="features-card" style="margin-top: 20px;">
    <h3><i class="fas fa-crown" style="color: var(--warning-color);"></i> Go Premium</h3>
    <ul class="features-list" style="margin-bottom: 15px;">
        <li><i class="fas fa-check-circle" style="color: var(--success-color);"></i> 10,000 character limit</li>
        <li><i class="fas fa-check-circle" style="color: var(--success-color);"></i> Commercial usage rights</li>
        <li><i class="fas fa-check-circle" style="color: var(--success-color);"></i> Priority processing</li>
    </ul>
    <button class="btn" onclick="openModal('signupModal')" style="width: 100%; background: linear-gradient(to right, var(--warning-color), var(--accent-color));">
        <i class="fas fa-rocket"></i> Upgrade Now
    </button>
</div>
            </aside>
        </main>
    </div>
    
    <!-- Profile Modal -->
    <div id="profileModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <span class="close" onclick="closeModal('profileModal')">&times;</span>
            <h2>My Account</h2>
            
            <div class="profile-tabs">
                <button class="tab-btn active" onclick="openTab('profileTab')">Profile</button>
                <button class="tab-btn" onclick="openTab('subscriptionTab')">Subscription</button>
                <button class="tab-btn" onclick="openTab('securityTab')">Security</button>
            </div>
            
            <div id="profileTab" class="tab-content active">
                <div class="profile-info">
                    <div class="info-item">
                        <label>Name:</label>
                        <span id="profileName"></span>
                    </div>
                    <div class="info-item">
                        <label>Email:</label>
                        <span id="profileEmail"></span>
                    </div>
                    <div class="info-item">
                        <label>Member Since:</label>
                        <span id="profileCreated"></span>
                    </div>
                    <div class="info-item">
                        <label>Current Plan:</label>
                        <span id="profilePlan" class="plan-badge free">Free</span>
                    </div>
                    <div class="info-item">
                        <label>Characters Used:</label>
                        <span id="profileCharsUsed">0</span>/<span id="profileCharLimit">5000</span>
                    </div>
                </div>
                
                <button class="btn" onclick="logout()">Log Out</button>
            </div>
            
            <div id="subscriptionTab" class="tab-content">
                <h3>Subscription Plan</h3>
                <div id="currentPlan" class="plan-card">
                    <h4 id="planName">Free Plan</h4>
                    <div class="plan-features">
                        <div><i class="fas fa-check"></i> <span>5000 characters per conversion</span></div>
                        <div><i class="fas fa-check"></i> <span>5 conversions per day</span></div>
                    </div>
                    <button class="btn upgrade-btn" onclick="openModal('pricingModal')">Upgrade Plan</button>
                </div>
                
                <div class="redeem-section">
                    <h4>Redeem Code</h4>
                    <p>Enter a promo code to upgrade your account</p>
                    <div class="input-group">
                        <input type="text" id="promoCode" placeholder="Enter promo code">
                        <button class="btn">Apply</button>
                    </div>
                </div>
            </div>
            
            <div id="securityTab" class="tab-content">
                <div class="security-section">
                    <h3>Reset Password</h3>
                    <div class="form-group">
                        <label>Current Password</label>
                        <input type="password" id="currentPassword">
                    </div>
                    <div class="form-group">
                        <label>New Password</label>
                        <input type="password" id="newPassword">
                    </div>
                    <div class="form-group">
                        <label>Confirm New Password</label>
                        <input type="password" id="confirmPassword">
                    </div>
                    <button class="btn">Update Password</button>
                </div>
                
                <div class="danger-zone">
                    <h3>Danger Zone</h3>
                    <p>Permanently delete your account and all data</p>
                    <button class="btn danger-btn" onclick="confirmDeleteAccount()">Delete Account</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('loginModal')">&times;</span>
            <h2>Login to Your Account</h2>
            
            <form class="auth-form" id="loginForm" onsubmit="handleLoginSubmit(event)">
    <input type="email" id="loginEmail" placeholder="Email" required>
    <input type="password" id="loginPassword" placeholder="Password" required>
    <button type="submit" class="btn">Login</button>
</form>
            
            <div class="divider">
                <span class="divider-text">OR</span>
            </div>
            
            <div class="auth-providers">
                <button class="auth-provider-btn google-btn" onclick="signInWithGoogle()">
                    <i class="fab fa-google"></i> Sign in with Google
                </button>
                <button class="auth-provider-btn github-btn" onclick="signInWithGitHub()">
                    <i class="fab fa-github"></i> Sign in with GitHub
                </button>
            </div>
            
            <p style="text-align: center; margin-top: 20px;">
                Don't have an account? <a href="#" onclick="openModal('signupModal'); closeModal('loginModal')">Sign up</a>
            </p>
        </div>
    </div>

    <!-- Signup Modal -->
    <div id="signupModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('signupModal')">&times;</span>
            <h2>Create Your Account</h2>
            
            <form class="auth-form" id="signupForm" onsubmit="handleSignupSubmit(event)">
    <input type="text" id="signupName" placeholder="Full Name" required>
    <input type="email" id="signupEmail" placeholder="Email" required>
    <input type="password" id="signupPassword" placeholder="Password" required>
    <input type="password" id="signupConfirmPassword" placeholder="Confirm Password" required>
    <button type="submit" class="btn">Sign Up</button>
</form>
            
            <div class="divider">
                <span class="divider-text">OR</span>
            </div>
            
            <div class="auth-providers">
                <button class="auth-provider-btn google-btn" onclick="signInWithGoogle()">
                    <i class="fab fa-google"></i> Sign up with Google
                </button>
                <button class="auth-provider-btn github-btn" onclick="signInWithGitHub()">
                    <i class="fab fa-github"></i> Sign up with GitHub
                </button>
            </div>
            
            <p style="text-align: center; margin-top: 20px;">
                Already have an account? <a href="#" onclick="openModal('loginModal'); closeModal('signupModal')">Login</a>
            </p>
        </div>
    </div>

    <!-- Pricing Modal -->
    <div id="pricingModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('pricingModal')">&times;</span>
            <h2>SKY TTS Pricing Plans</h2>
            <p>Choose the plan that fits your needs</p>
            
            <div class="pricing-plans">
                <div class="pricing-card">
                    <h3>Free</h3>
                    <div class="price">$0 <span>/ month</span></div>
                    <ul class="pricing-features">
                        <li>5000 characters per conversion</li>
                        <li>Basic voices</li>
                        <li>5 conversions per day</li>
                        <li>Standard speed & pitch control</li>
                        <li>Email support</li>
                    </ul>
                    <button class="btn" onclick="selectPlan('free')">Get Started</button>
                </div>
                
                <div class="pricing-card featured">
                    <div class="featured-badge">Most Popular</div>
                    <h3>Pro</h3>
                    <div class="price">$9.99 <span>/ month</span></div>
                    <ul class="pricing-features">
                        <li>5000 characters per conversion</li>
                        <li>Premium voices (Edge, Polly)</li>
                        <li>Unlimited conversions</li>
                        <li>Advanced speed & pitch control</li>
                        <li>Priority email support</li>
                        <li>Commercial use license</li>
                    </ul>
                    <button class="btn" onclick="selectPlan('pro')">Choose Plan</button>
                </div>
                
                <div class="pricing-card">
                    <h3>Enterprise</h3>
                    <div class="price">$29.99 <span>/ month</span></div>
                    <ul class="pricing-features">
                        <li>Unlimited characters</li>
                        <li>All premium voices</li>
                        <li>Unlimited conversions</li>
                        <li>Advanced voice controls</li>
                        <li>24/7 priority support</li>
                        <li>Commercial use license</li>
                        <li>API access</li>
                    </ul>
                    <button class="btn" onclick="selectPlan('enterprise')">Choose Plan</button>
                </div>
            </div>

            <div style="margin-top: 30px;">
                <h3>Payment Methods</h3>
                <div class="payment-methods">
                    <div class="payment-method">
                        <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/stripe/stripe-original.svg" alt="Stripe">
                    </div>
                    <div class="payment-method">
                        <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/paypal/paypal-original.svg" alt="PayPal">
                    </div>
                    <div class="payment-method">
                        <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/google/google-original.svg" alt="Google Pay">
                    </div>
                    <div class="payment-method">
                        <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/apple/apple-original.svg" alt="Apple Pay">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer id="contact">
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>SKY TTS</h3>
                    <p>Transform your ideas into reality in seconds with our powerful tools â€” Fast. Expressive. Professional.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://x.com/home" target="_blank"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                        <a href="https://www.youtube.com/@SkyInfinite-Learning" target="_blank"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="#">Home</a></li>
                        <li><a href="#" onclick="openModal('pricingModal')">Pricing</a></li>
                        <li><a href="#">Documentation</a></li>
                        <li><a href="#">API</a></li>
                        <li><a href="https://www.skyinfinitetech.com/" target="_blank">About</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Support</h3>
                    <ul>
                        <li><a href="#">Contact Us</a></li>
                        <li><a href="#">Help Center</a></li>
                        <li><a href="#">Terms of Service</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Refund Policy</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                <p>&copy; 2025 SKY TTS. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <div class="dark-mode-toggle" onclick="toggleDarkMode()">
        <i class="fas fa-moon" id="darkModeIcon"></i>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script>
    // Simple storage for our data
let appData = {
    voices: {},
    user: null,
    isLoggedIn: false
};

// Initialize everything when page loads
document.addEventListener('DOMContentLoaded', function() {
    setupEventListeners();
    loadInitialData();
    
    // Initialize Select2 dropdowns
    $('.language-select').select2();
    $('.voice-select').select2();
});

// Set up all event listeners
function setupEventListeners() {
    // Auth button
    document.getElementById('authButton').addEventListener('click', function(e) {
        e.preventDefault();
        if (appData.isLoggedIn) {
            toggleUserMenu();
        } else {
            openModal('loginModal');
        }
    });

    // File upload
    document.getElementById('fileUpload').addEventListener('change', handleFileUpload);

    // Text input
    document.getElementById('text').addEventListener('input', updateCharCount);
}

// Load initial data from backend
async function loadInitialData() {
    try {
        // Load voices
        const voicesResponse = await fetch('/api/voices');
        if (!voicesResponse.ok) {
            throw new Error('Failed to fetch voices');
        }
        const voicesData = await voicesResponse.json();
        
        if (voicesData.status === 'success') {
            appData.voices = voicesData.voices;
            populateLanguageDropdown();
            updateVoiceDropdown();
            updateVoiceGallery();
        } else {
            throw new Error(voicesData.message || 'Failed to load voices');
        }

        // Check auth status with credentials
        const authResponse = await fetch('/api/auth/status', {
            credentials: 'include' // Important for session cookies
        });
        
        if (!authResponse.ok) {
            throw new Error('Failed to check auth status');
        }
        
        const authData = await authResponse.json();
        
        if (authData.authenticated) {
            appData.isLoggedIn = true;
            appData.user = authData.user;
            updateAuthUI();
            updateUserMenu();
        } else {
            appData.isLoggedIn = false;
            appData.user = null;
            updateAuthUI();
        }
    } catch (error) {
        console.error('Initialization error:', error);
        showStatus('Error loading initial data', 'error');
    }
}

// Add these functions to your script
async function handleLoginSubmit(e) {
    e.preventDefault();
    const email = document.getElementById('loginEmail').value;
    const password = document.getElementById('loginPassword').value;
    
    try {
        const response = await fetch('/api/auth/login', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            credentials: 'include',
            body: JSON.stringify({ email, password })
        });
        
        const data = await response.json();
        
        if (data.status === 'success') {
            appData.isLoggedIn = true;
            appData.user = data.user;
            updateAuthUI();
            showStatus('Login successful!', 'success');
            closeModal('loginModal');
            loadInitialData();
        } else {
            throw new Error(data.message || 'Login failed');
        }
    } catch (error) {
        showStatus(error.message, 'error');
    }
}

async function handleSignupSubmit(e) {
    e.preventDefault();
    const name = document.getElementById('signupName').value;
    const email = document.getElementById('signupEmail').value;
    const password = document.getElementById('signupPassword').value;
    const confirmPassword = document.getElementById('signupConfirmPassword').value;
    
    if (password !== confirmPassword) {
        showStatus('Passwords do not match', 'error');
        return;
    }
    
    try {
        const response = await fetch('/api/auth/signup', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            credentials: 'include',
            body: JSON.stringify({ name, email, password })
        });
        
        const data = await response.json();
        
        if (data.status === 'success') {
            showStatus('Account created! Please login.', 'success');
            closeModal('signupModal');
            openModal('loginModal');
        } else {
            throw new Error(data.message || 'Signup failed');
        }
    } catch (error) {
        showStatus(error.message, 'error');
    }
}

// Populate language dropdown
function populateLanguageDropdown() {
    const select = document.getElementById('language');
    select.innerHTML = '<option value="">Select Language</option>';
    
    if (!appData.voices) return;
    
    Object.keys(appData.voices).forEach(lang => {
        const option = document.createElement('option');
        option.value = lang;
        option.textContent = lang.charAt(0).toUpperCase() + lang.slice(1);
        select.appendChild(option);
    });
    
    // Refresh Select2
    $(select).trigger('change');
}

// Update voice dropdown based on selected language
function updateVoiceDropdown() {
    const language = document.getElementById('language').value;
    const select = document.getElementById('voice');
    select.innerHTML = '<option value="">Select Voice</option>';
    
    if (!language || !appData.voices[language]) return;
    
    appData.voices[language].forEach(voice => {
        const option = document.createElement('option');
        option.value = voice.id;
        option.textContent = voice.name;
        select.appendChild(option);
    });
    
    // Refresh Select2
    $(select).trigger('change');
}

// Update voice gallery display
function updateVoiceGallery(filter = 'all') {
    const gallery = document.getElementById('voiceGallery');
    if (!gallery) return;
    
    gallery.innerHTML = '';
    
    const language = document.getElementById('language').value;
    let voices = [];
    
    // Get voices for current language or all voices
    if (language && appData.voices[language]) {
        voices = appData.voices[language];
    } else {
        Object.values(appData.voices).forEach(langVoices => {
            voices.push(...langVoices);
        });
    }
    
    // Apply filter
    if (filter !== 'all') {
        voices = voices.filter(voice => voice.gender === filter);
    }
    
    // Display voices or show message if none
    if (voices.length === 0) {
        gallery.innerHTML = '<div class="no-voices">No voices available for this selection</div>';
        return;
    }
    
    voices.forEach(voice => {
        const card = document.createElement('div');
        card.className = 'voice-card';
        card.innerHTML = `
            <button class="preview-btn" onclick="playVoicePreview('${voice.id}')">
                <i class="fas fa-play"></i>
            </button>
            <h4>${voice.name}</h4>
            <div class="voice-gender">${voice.gender || 'N/A'}</div>
            <div class="voice-style">${voice.style || 'Standard'}</div>
        `;
        
        card.addEventListener('click', () => selectVoice(voice));
        gallery.appendChild(card);
    });
}

// Select a voice from the gallery
function selectVoice(voice) {
    // Find the voice's language if not already selected
    if (!document.getElementById('language').value) {
        for (const lang in appData.voices) {
            if (appData.voices[lang].some(v => v.id === voice.id)) {
                document.getElementById('language').value = lang;
                updateVoiceDropdown();
                break;
            }
        }
    }
    
    document.getElementById('voice').value = voice.id;
    updateVoiceInfo();
    
    // Refresh Select2
    $('#voice').trigger('change');
}

// Update voice information display
function updateVoiceInfo() {
    const voiceId = document.getElementById('voice').value;
    const language = document.getElementById('language').value;
    
    if (!voiceId || !language) return;
    
    const voice = appData.voices[language].find(v => v.id === voiceId);
    if (!voice) return;
    
    const infoDiv = document.getElementById('voiceInfo');
    infoDiv.innerHTML = `
        <h3>Voice Details</h3>
        <p>${voice.description || 'No description available'}</p>
        <p><strong>Style:</strong> ${voice.style || 'N/A'}</p>
        <p><strong>Best for:</strong> ${voice.use_cases ? voice.use_cases.join(', ') : 'N/A'}</p>
        <p><strong>Age Range:</strong> ${voice.age_range || 'N/A'}</p>
        <p><strong>Mood:</strong> ${voice.mood || 'N/A'}</p>
    `;
    infoDiv.style.display = 'block';
}

// Handle login
async function handleLogin(email, password) {
    try {
        showStatus('Logging in...', 'success');
        
        const response = await fetch('/api/auth/login', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            credentials: 'include', // Important for session cookies
            body: JSON.stringify({ email, password })
        });
        
        const data = await response.json();
        
        if (data.status === 'success') {
            appData.isLoggedIn = true;
            appData.user = data.user;
            updateAuthUI();
            showStatus('Login successful!', 'success');
            closeModal('loginModal');
            
            // Reload voice data in case user has different permissions
            loadInitialData();
        } else {
            throw new Error(data.message || 'Login failed');
        }
    } catch (error) {
        console.error('Login error:', error);
        showStatus(error.message, 'error');
    }
}

// Handle signup
async function handleSignup(name, email, password) {
    try {
        showStatus('Creating account...', 'success');
        
        const response = await fetch('/api/auth/signup', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            credentials: 'include', // Important for session cookies
            body: JSON.stringify({ name, email, password })
        });
        
        const data = await response.json();
        
        if (data.status === 'success') {
            showStatus('Account created! Please login.', 'success');
            closeModal('signupModal');
            openModal('loginModal');
        } else {
            throw new Error(data.message || 'Signup failed');
        }
    } catch (error) {
        console.error('Signup error:', error);
        showStatus(error.message, 'error');
    }
}

// Update auth UI to not disable generate button
function updateAuthUI() {
    const authButton = document.getElementById('authButton');
    
    if (appData.isLoggedIn && appData.user) {
        authButton.innerHTML = `
            <i class="fas fa-user-circle"></i>
            ${appData.user.name || 'User'}
            <i class="fas fa-caret-down"></i>
        `;
        updateUserMenu();
    } else {
        authButton.innerHTML = '<i class="fas fa-sign-in-alt"></i> Login';
    }
}

// Update user menu
function updateUserMenu() {
    const userMenu = document.getElementById('userMenu');
    if (!userMenu) return;
    
    userMenu.innerHTML = `
        <div class="user-menu-item" onclick="openModal('profileModal')">
            <i class="fas fa-user"></i>
            <span>Profile</span>
        </div>
        <div class="user-menu-item" onclick="openModal('pricingModal')">
            <i class="fas fa-crown"></i>
            <span>Upgrade</span>
        </div>
        <div class="user-menu-divider"></div>
        <div class="user-menu-item" onclick="logout()">
            <i class="fas fa-sign-out-alt"></i>
            <span>Log Out</span>
        </div>
    `;
}

// Generate TTS
// Modify the generateTTS function to work without login
async function generateTTS() {
    const text = document.getElementById('text').value.trim();
    const language = document.getElementById('language').value;
    const voiceId = document.getElementById('voice').value;
    const speed = document.getElementById('speed').value;
    const pitch = document.getElementById('pitch').value;
    const use_ssml = document.getElementById('use_ssml').checked;
    
    if (!text) {
        showStatus('Please enter text to convert', 'error');
        return;
    }
    
    if (!language || !voiceId) {
        showStatus('Please select both language and voice', 'error');
        return;
    }

    showStatus('Generating speech...', 'success');
    document.getElementById('generateBtn').disabled = true;

    try {
        const response = await fetch('/api/generate_tts', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Accept': 'application/json'
            },
            body: JSON.stringify({
                text,
                language,
                voice_id: voiceId,
                speed,
                pitch,
                use_ssml
            })
        });

        const data = await response.json();

        if (data.status === 'success') {
            const audioPlayer = document.getElementById('audioPlayer');
            audioPlayer.src = data.audio_url;
            audioPlayer.style.display = 'block';
            showStatus('Speech generated!', 'success');
            
            // Update voice info if available
            if (data.voice_metadata) {
                const infoDiv = document.getElementById('voiceInfo');
                infoDiv.innerHTML = `
                    <h3>Voice Details</h3>
                    <p>${data.voice_metadata.description || 'No description available'}</p>
                    <p><strong>Style:</strong> ${data.voice_metadata.style || 'N/A'}</p>
                    <p><strong>Best for:</strong> ${data.voice_metadata.use_cases ? data.voice_metadata.use_cases.join(', ') : 'N/A'}</p>
                    <p><strong>Age Range:</strong> ${data.voice_metadata.age_range || 'N/A'}</p>
                    <p><strong>Mood:</strong> ${data.voice_metadata.mood || 'N/A'}</p>
                `;
                infoDiv.style.display = 'block';
            }
        } else {
            throw new Error(data.message || 'Generation failed');
        }
    } catch (error) {
        console.error('TTS Generation Error:', error);
        showStatus(error.message, 'error');
    } finally {
        document.getElementById('generateBtn').disabled = false;
    }
}

// Handle file upload
async function handleFileUpload(event) {
    const file = event.target.files[0];
    if (!file) return;

    document.getElementById('fileName').textContent = file.name;
    
    try {
        const formData = new FormData();
        formData.append('file', file);
        
        const response = await fetch('/api/process-file', {
            method: 'POST',
            credentials: 'include', // Important for session cookies
            body: formData
        });
        
        const data = await response.json();
        
        if (data.status === 'success') {
            document.getElementById('text').value = data.text;
            updateCharCount();
            showStatus('File processed successfully', 'success');
        } else {
            throw new Error(data.message || 'File processing failed');
        }
    } catch (error) {
        console.error('File upload error:', error);
        showStatus(error.message, 'error');
    }
}

// Play voice preview
async function playVoicePreview(voiceId) {
    try {
        const audioPlayer = document.getElementById('audioPlayer');
        audioPlayer.src = `/api/voice-preview/${voiceId}`;
        audioPlayer.style.display = 'block';
        await audioPlayer.play();
    } catch (error) {
        console.error('Error playing preview:', error);
        showStatus('Could not play preview', 'error');
    }
}

// Update character count
function updateCharCount() {
    const text = document.getElementById('text').value;
    const counter = document.getElementById('charCount');
    counter.textContent = text.length;
    counter.className = text.length > 5000 ? 'char-counter limit-exceeded' : 'char-counter';
}

// Show status message
function showStatus(message, type) {
    const statusElement = document.getElementById('status');
    statusElement.innerHTML = `
        <i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'}"></i>
        ${message}
    `;
    statusElement.className = `status ${type}`;
    statusElement.style.display = 'block';
    
    setTimeout(() => {
        statusElement.style.display = 'none';
    }, 5000);
}

// Global utility functions
window.openModal = function(modalId) {
    document.getElementById(modalId).style.display = 'block';
};

window.closeModal = function(modalId) {
    document.getElementById(modalId).style.display = 'none';
};

window.toggleUserMenu = function() {
    const menu = document.getElementById('userMenu');
    menu.classList.toggle('show');
    
    document.addEventListener('click', function closeMenu(e) {
        if (!menu.contains(e.target) && e.target.id !== 'authButton') {
            menu.classList.remove('show');
            document.removeEventListener('click', closeMenu);
        }
    });
};

window.logout = async function() {
    try {
        const response = await fetch('/api/auth/logout', { 
            method: 'POST',
            credentials: 'include' // Important for session cookies
        });
        const data = await response.json();
        
        if (data.status === 'success') {
            appData.isLoggedIn = false;
            appData.user = null;
            updateAuthUI();
            showStatus('Logged out successfully', 'success');
            closeModal('profileModal');
        } else {
            throw new Error(data.message || 'Logout failed');
        }
    } catch (error) {
        showStatus(error.message, 'error');
    }
};

window.filterVoices = function(gender, event) {
    event.preventDefault();
    document.querySelectorAll('.voice-filter-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    event.target.classList.add('active');
    updateVoiceGallery(gender);
};

window.toggleDarkMode = function() {
    document.body.classList.toggle('dark-mode');
    const icon = document.getElementById('darkModeIcon');
    icon.classList.toggle('fa-moon');
    icon.classList.toggle('fa-sun');
};

window.signInWithGoogle = function() {
    window.location.href = '/api/auth/google';
};

window.signInWithGitHub = function() {
    window.location.href = '/api/auth/github';
};

// Add event listeners for language and voice dropdown changes
document.getElementById('language').addEventListener('change', function() {
    updateVoiceDropdown();
    updateVoiceGallery();
});	
</script>
</body>
</html>